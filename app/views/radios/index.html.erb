<section class="section">
  <div class="container">
    <h1 class="title">
      <i class="fas fa-broadcast-tower"></i> Radios
    </h1>

    <%= form_with model: @radio, url: radios_path, method: :post, local: true do |f| %>
      <div class="columns is-multiline">

        <div class="column is-one-third">
          <div class="field">
            <label class="label">Título</label>
            <div class="control">
              <%= f.text_field :title, class: "input", required: true %>
            </div>
          </div>
        </div>

        <div class="column is-one-third">
          <div class="field">
            <label class="label">URL de Stream</label>
            <div class="control">
              <%= f.text_field :stream_url, class: "input", required: true %>
            </div>
          </div>
        </div>

        <div class="column is-one-third is-flex is-align-items-flex-end">
          <div class="field">
            <div class="control">
              <button type="submit" class="button is-primary">
                <i class="fas fa-plus mr-1"></i> Agregar radio
              </button>
            </div>
          </div>
        </div>

      </div>
    <% end %>

    <hr>

    <h2 class="subtitle mt-5">
      <i class="fas fa-list"></i> Lista de radios
    </h2>

    <div class="table-container">
      <table class="table is-fullwidth is-striped">
        <thead>
          <tr>
            <th>Título</th>
            <th>URL de Stream</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% @radios.each do |radio| %>
            <tr>
              <td><%= radio.title %></td>
              <td><code title="<%= radio.stream_url %>"><%= truncate(radio.stream_url, length: 50) %></code></td>
              <td>
                <%= button_to radio_path(radio), method: :delete, data: { confirm: "¿Seguro que deseas eliminar esta radio?" }, class: "button is-danger is-small" do %>
                  <i class="fas fa-trash"></i>
                  <span class="ml-1">Eliminar</span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>
